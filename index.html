<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة تحكم الإدارة - العودة للعقار</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <!-- الهيدر -->
    <header class="admin-header">
        <div class="header-top">
            <div class="logo-container">
                <img src="logo.png" alt="شعار العودة للعقار" class="logo-img">
                <span class="admin-title">لوحة التحكم</span>
            </div>
            <div class="user-actions">
                <button class="icon-btn logout-btn" id="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </div>
        
        <div class="header-bottom">
            <nav class="admin-nav">
                <a href="#properties" class="nav-item active" data-section="properties">
                    <i class="fas fa-home"></i>
                    <span>إدارة العقارات</span>
                </a>
                <a href="#customers" class="nav-item" data-section="customers">
                    <i class="fas fa-users"></i>
                    <span>العملاء</span>
                </a>
                <a href="#settings" class="nav-item" data-section="settings">
                    <i class="fas fa-cogs"></i>
                    <span>الإعدادات</span>
                </a>
            </nav>
        </div>
    </header>

    <!-- المحتوى الرئيسي -->
    <main class="admin-main">
        <!-- قسم إدارة العقارات -->
        <section id="properties" class="admin-section active">
            <div class="section-header">
                <h1 class="section-title">إدارة العقارات</h1>
                <div class="section-actions">
                    <button class="btn btn-primary" id="add-property-btn">
                        <i class="fas fa-plus"></i>
                        إضافة عقار جديد
                    </button>
                </div>
            </div>
            
            <div class="filters-bar">
                <div class="search-container">
                    <div class="search-bar">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" class="search-input" id="properties-search" placeholder="ابحث في العقارات...">
                    </div>
                </div>
                <div class="filter-options">
                    <select id="property-status-filter">
                        <option value="all">جميع الحالات</option>
                        <option value="for-sale">للبيع</option>
                        <option value="for-rent">للتأجير</option>
                        <option value="sold">تم البيع</option>
                        <option value="rented">تم التأجير</option>
                    </select>
                    <select id="property-type-filter">
                        <option value="all">جميع الأنواع</option>
                        <option value="شقق">شقق</option>
                        <option value="فلل">فلل</option>
                        <option value="أراضي">أراضي</option>
                        <option value="مشاريع">مشاريع</option>
                    </select>
                </div>
            </div>
            
            <div class="properties-grid" id="properties-grid">
                <!-- سيتم تعبئة العقارات ديناميكياً -->
            </div>
        </section>
        
        <!-- قسم العملاء -->
        <section id="customers" class="admin-section">
            <div class="section-header">
                <h1 class="section-title">إدارة العملاء</h1>
            </div>
            
            <!-- شريط التصفية للعملاء -->
            <div class="filters-bar">
                <div class="search-container">
                    <div class="search-bar">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" class="search-input" id="customers-search" placeholder="ابحث في العملاء...">
                    </div>
                </div>
                <div class="filter-options">
                    <select id="customer-type-filter">
                        <option value="all">جميع العملاء</option>
                        <option value="sold">عملاء شراء</option>
                        <option value="rented">عملاء تأجير</option>
                    </select>
                </div>
            </div>
            
            <div class="customers-container">
                <div class="customers-stats">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-user-check"></i>
                        </div>
                        <div class="stat-info">
                            <h3 class="stat-value" id="sold-customers-count">0</h3>
                            <p class="stat-label">عملاء قاموا بالشراء</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-user-tie"></i>
                        </div>
                        <div class="stat-info">
                            <h3 class="stat-value" id="rented-customers-count">0</h3>
                            <p class="stat-label">عملاء قاموا بالتأجير</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-info">
                            <h3 class="stat-value" id="total-transactions">0</h3>
                            <p class="stat-label">إجمالي المعاملات</p>
                        </div>
                    </div>
                </div>
                
                <div class="customers-table-container">
                    <table class="customers-table">
                        <thead>
                            <tr>
                                <th>اسم العميل</th>
                                <th>رقم الهاتف</th>
                                <th>نوع المعاملة</th>
                                <th>العقار</th>
                                <th>قيمة المعاملة</th>
                                <th>التاريخ</th>
                                <th>الإجراءات</th>
                            </tr>
                        </thead>
                        <tbody id="customers-table-body">
                            <!-- سيتم تعبئة العملاء ديناميكياً -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
        
        <!-- قسم الإعدادات -->
        <section id="settings" class="admin-section">
            <div class="section-header">
                <h1 class="section-title">إعدادات النظام</h1>
            </div>
            
            <div class="settings-container">
                <div class="settings-card">
                    <h3>الإعدادات العامة</h3>
                    <form class="settings-form" id="settings-form">
                        <div class="form-group">
                            <label for="site-name">اسم الموقع</label>
                            <input type="text" id="site-name" value="العودة للعقار">
                        </div>
                        
                        <div class="form-group">
                            <label for="site-url">رابط الموقع</label>
                            <input type="url" id="site-url" value="https://example.com">
                        </div>
                        
                        <div class="form-group">
                            <label for="site-description">وصف الموقع</label>
                            <textarea id="site-description" rows="3">منصة العقارات الذكية</textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="contact-email">البريد الإلكتروني للتواصل</label>
                            <input type="email" id="contact-email" value="info@example.com">
                        </div>
                        
                        <div class="form-group">
                            <label for="contact-phone">رقم الهاتف</label>
                            <input type="text" id="contact-phone" value="+966500000000">
                        </div>
                        
                        <button type="submit" class="btn btn-primary">حفظ الإعدادات</button>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <!-- نافذة إضافة/تعديل عقار -->
    <div class="modal" id="property-modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 id="property-modal-title">إضافة عقار جديد</h3>
                <button class="close-modal" id="close-property-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="property-form">
                    <input type="hidden" id="property-id">
                    
                    <div class="form-tabs">
                        <button type="button" class="tab-btn active" data-tab="basic-info">المعلومات الأساسية</button>
                        <button type="button" class="tab-btn" data-tab="details">التفاصيل</button>
                        <button type="button" class="tab-btn" data-tab="media">الصور والفيديوهات</button>
                        <button type="button" class="tab-btn" data-tab="features">المميزات</button>
                    </div>
                    
                    <div class="tab-content active" id="basic-info-tab">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="property-title">اسم العقار *</label>
                                <input type="text" id="property-title" placeholder="أدخل اسم العقار" required>
                            </div>
                            <div class="form-group">
                                <label for="property-code">رمز العقار *</label>
                                <input type="text" id="property-code" placeholder="مثل: J107" required>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="property-type">نوع العقار *</label>
                                <select id="property-type" required>
                                    <option value="">اختر النوع</option>
                                    <option value="شقق">شقق</option>
                                    <option value="فلل">فلل</option>
                                    <option value="أراضي">أراضي</option>
                                    <option value="مشاريع">مشاريع</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="property-category">التصنيف *</label>
                                <select id="property-category" required>
                                    <option value="">اختر التصنيف</option>
                                    <option value="للبيع">للبيع</option>
                                    <option value="للإيجار">للإيجار</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="property-price">السعر *</label>
                                <input type="text" id="property-price" placeholder="أدخل السعر" required>
                            </div>
                            <div class="form-group">
                                <label for="property-area">المساحة (م²) *</label>
                                <input type="number" id="property-area" placeholder="أدخل المساحة" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="property-location">الموقع *</label>
                            <input type="text" id="property-location" placeholder="أدخل العنوان" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="property-description">الوصف</label>
                            <textarea id="property-description" placeholder="أدخل وصف العقار" rows="4"></textarea>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="details-tab">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="bedrooms">عدد غرف النوم</label>
                                <input type="number" id="bedrooms" placeholder="0" min="0">
                            </div>
                            <div class="form-group">
                                <label for="bathrooms">عدد الحمامات</label>
                                <input type="number" id="bathrooms" placeholder="0" min="0">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="living-rooms">عدد صالات الاستقبال</label>
                                <input type="number" id="living-rooms" placeholder="0" min="0">
                            </div>
                            <div class="form-group">
                                <label for="kitchens">عدد المطابخ</label>
                                <input type="number" id="kitchens" placeholder="0" min="0">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="parking">عدد مواقف السيارات</label>
                                <input type="number" id="parking" placeholder="0" min="0">
                            </div>
                            <div class="form-group">
                                <label for="floors">عدد الطوابق</label>
                                <input type="number" id="floors" placeholder="0" min="0">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="year-built">سنة البناء</label>
                            <input type="number" id="year-built" placeholder="أدخل سنة البناء" min="1900" max="2030">
                        </div>
                        
                        <div class="form-group">
                            <label for="additional-details">تفاصيل إضافية</label>
                            <textarea id="additional-details" placeholder="أي تفاصيل إضافية تريد إضافتها" rows="4"></textarea>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="media-tab">
                        <div class="form-group">
                            <label>الصور</label>
                            <div class="media-upload-container" id="image-upload-container">
                                <div class="media-upload-placeholder" id="image-upload-placeholder">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>اسحب وأفلت الصور هنا أو انقر للاختيار</p>
                                    <span class="media-upload-hint">يمكنك رفع أي عدد من الصور</span>
                                </div>
                                <input type="file" id="property-images" multiple accept="image/*" style="display: none;">
                            </div>
                            <div class="uploaded-media" id="uploaded-images-preview"></div>
                        </div>
                        
                        <div class="form-group">
                            <label>مقاطع الفيديو</label>
                            <div class="media-upload-container" id="video-upload-container">
                                <div class="media-upload-placeholder" id="video-upload-placeholder">
                                    <i class="fas fa-video"></i>
                                    <p>اسحب وأفلت مقاطع الفيديو هنا أو انقر للاختيار</p>
                                    <span class="media-upload-hint">يمكنك رفع أي عدد من مقاطع الفيديو</span>
                                </div>
                                <input type="file" id="property-videos" multiple accept="video/*" style="display: none;">
                            </div>
                            <div class="uploaded-media" id="uploaded-videos-preview"></div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="features-tab">
                        <div class="form-group">
                            <label>المميزات الرئيسية</label>
                            <div class="features-checkboxes">
                                <label class="checkbox-label">
                                    <input type="checkbox" value="حديقة خاصة">
                                    <span class="checkmark"></span>
                                    حديقة خاصة
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" value="مسبح">
                                    <span class="checkmark"></span>
                                    مسبح
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" value="نظام أمني">
                                    <span class="checkmark"></span>
                                    نظام أمني
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" value="تكييف مركزي">
                                    <span class="checkmark"></span>
                                    تكييف مركزي
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" value="مواقف سيارات">
                                    <span class="checkmark"></span>
                                    مواقف سيارات
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" value="شرفة">
                                    <span class="checkmark"></span>
                                    شرفة
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" value="مطبخ مجهز">
                                    <span class="checkmark"></span>
                                    مطبخ مجهز
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" value="غرفة خادمة">
                                    <span class="checkmark"></span>
                                    غرفة خادمة
                                </label>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="custom-features">مميزات مخصصة</label>
                            <div class="custom-features-container">
                                <div class="custom-features-input">
                                    <input type="text" id="new-feature" placeholder="أضف ميزة جديدة">
                                    <button type="button" class="btn btn-outline" id="add-feature-btn">إضافة</button>
                                </div>
                                <div class="custom-features-list" id="custom-features-list"></div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancel-property">إلغاء</button>
                <button class="btn btn-primary" id="save-property">حفظ العقار</button>
            </div>
        </div>
    </div>

    <!-- نافذة تغيير حالة العقار -->
    <div class="modal" id="status-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>تحديث حالة العقار</h3>
                <button class="close-modal" id="close-status-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="status-form">
                    <input type="hidden" id="status-property-id">
                    <div class="form-group">
                        <label for="property-status">الحالة الحالية</label>
                        <div class="current-status" id="current-status-display">
                            <span class="status-badge for-sale">للبيع</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="new-status">تغيير الحالة إلى</label>
                        <select id="new-status" required>
                            <option value="">اختر الحالة الجديدة</option>
                            <option value="for-sale">للبيع</option>
                            <option value="for-rent">للتأجير</option>
                            <option value="sold">تم البيع</option>
                            <option value="rented">تم التأجير</option>
                        </select>
                    </div>
                    <div class="form-group" id="transaction-details" style="display: none;">
                        <label for="customer-name">اسم العميل *</label>
                        <input type="text" id="customer-name" placeholder="أدخل اسم العميل">
                        
                        <label for="customer-phone">رقم هاتف العميل *</label>
                        <input type="text" id="customer-phone" placeholder="أدخل رقم الهاتف">
                        
                        <label for="transaction-date">تاريخ المعاملة *</label>
                        <input type="date" id="transaction-date">
                        
                        <label for="transaction-amount">قيمة المعاملة *</label>
                        <input type="number" id="transaction-amount" placeholder="أدخل القيمة">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancel-status-change">إلغاء</button>
                <button class="btn btn-primary" id="save-status-change">حفظ التغييرات</button>
            </div>
        </div>
    </div>

    <!-- نافذة عرض تفاصيل العقار -->
    <div class="modal" id="details-modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 id="details-modal-title">تفاصيل العقار</h3>
                <button class="close-modal" id="close-details-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="property-details-content">
                    <!-- سيتم تعبئة تفاصيل العقار هنا -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="close-details">إغلاق</button>
            </div>
        </div>
    </div>

    <!-- رسائل التنبيه -->
    <div class="alert-container" id="alert-container"></div>

    <script src="admin.js"></script>
</body>
</html>